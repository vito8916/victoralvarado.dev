---
import type {CollectionEntry} from 'astro:content';
import formatDatetime from '../utils/formatDatetime.js';

interface Props {
    work: CollectionEntry<'work'>;
}

const {data, slug} = Astro.props.work;
---

<div class="work">
    <div class="work-info">
        <small class="work-timeframe">
            {formatDatetime(data.date)} â€“ {data.endDate !== undefined ? formatDatetime(data.endDate) : 'Present'}
        </small>
        <h3 class="work-position" transition:name={`title-${slug}`}>
            {data.position}
        </h3>
        <small class="work-company" transition:name={`description-${slug}`}>
            At {data.company}
        </small> <br/>
        <small class="work-location">
            {data.location}
        </small>
    </div>
    <div>
        <p class="work-description" transition:name={`cont-${slug}`}>
            {data.description} <br/>
            {data.bullets && (
                <ul class="bullets">
                    {data.bullets.map((bullet) => (
                        <li>{bullet}</li>
                    ))}
                </ul>
            )}
            {data.showLink && (
                    <a href={`/work/${slug}/`}>Read More</a>
            )}
        </p>

    </div>
</div>

<style>

    .work {
        margin-bottom: var(--spacing-l);
    }

    .work-position {
        font-size: 1.5rem;
        margin: 0;
    }

    .work-company {
        color: var(--color-titles);
    }

    @media (min-width: 600px) {
        .work {
            display: grid;
            grid-column: 1fr;
            align-items: baseline;
            margin-bottom: var(--spacing-l);
            gap: 1rem;
        }

        .work .work_date {
            margin: 0;
        }
    }

    small {
        margin-top: var(--spacing-s);
    }
    .bullets {
        font-size: var(--font-s);
        /*padding-left: var(--spacing-l);*/
        list-style-type: disc;
    }
    .bullets li {
        margin-bottom: var(--spacing-s);
    }
</style>