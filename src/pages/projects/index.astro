---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import {getCollection} from 'astro:content';
import ProjectPreview from "../../components/ProjectPreview.astro";
import Menu from "../../components/Menu.jsx";
import Alert from "../../components/Alert.astro";

// Content Fetching: List four most recent work projects
const projects = (await getCollection('projects', ({ data }) => !data.draft)).sort(
    (a: any, b: any) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
---

<Layout title="Victor Alvarado | My Projects">
    <Header title="My Personal Projects" description=" This is a compilation of some of the projects I have worked on, both personal and for others.." showContact={false}/>
    <main>
        <Alert />
        <!--Projects Section-->
        <section class="container border-bottom">
            {
                projects.map((project) => (
                        <ProjectPreview coll={project}/>
                ))
            }
        </section>
    </main>
</Layout>
